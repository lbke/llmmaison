---
import { parseTimestamp } from "../utils/data";
import type { EnrichedData } from "../schemas/data.js";

export interface Props {
  installation: EnrichedData;
}

const { installation } = Astro.props;
---

<div
  class="bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden"
>
  <div class="p-6">
    <div class="flex items-start justify-between mb-4">
      <h3 class="text-lg font-semibold text-gray-900 line-clamp-2">
        {installation.name || "Installation anonyme"}
      </h3>
      <div class="flex items-center">
        {
          installation.primaryModel && (
            <span class="bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full">
              {installation.primaryModel}
            </span>
          )
        }
      </div>
    </div>

    <div class="space-y-2 mb-4">
      {
        installation.installLocation && (
          <p class="text-sm text-gray-600">
            <span class="font-medium">Installation:</span>{" "}
            {installation.installLocation}
          </p>
        )
      }
      {
        installation.software && (
          <p class="text-sm text-gray-600 line-clamp-1">
            <span class="font-medium">Logiciels:</span> {installation.software}
          </p>
        )
      }
      {
        installation.performance && (
          <p class="text-sm text-gray-600">
            <span class="font-medium">Performance:</span>{" "}
            {installation.performance}
          </p>
        )
      }
    </div>

    <div class="flex items-center justify-between">
      <div class="flex items-center text-sm text-gray-500">
        <svg
          class="w-4 h-4 mr-1"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        {parseTimestamp(installation.timestamp).toLocaleDateString("fr-FR")}
      </div>

      <a
        href={`/installation/${installation.slug}`}
        class="text-blue-600 hover:text-blue-800 font-medium text-sm transition-colors"
      >
        Voir les détails →
      </a>
    </div>
  </div>
</div>
